<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AH Mobile Ramzan Activity Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* CSS mein koi tabdeeli nahin */
        :root{--dark-green:#0a4f0d;--medium-green:#1b5e20;--light-green:#a5d6a7;--gold-color:#d4af37;--background-cream:#fdfaf5;}body{font-family:'Noto Nastaliq Urdu',sans-serif;background-color:var(--background-cream);background-image:url('data:image/svg+xml,%3Csvg width="80" height="80" viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23d6e8d6" fill-opacity="0.3"%3E%3Cpath d="M50 50c0-5.523 4.477-10 10-10s10 4.477 10 10-4.477 10-10 10-10-4.477-10-10zM10 10c0-5.523 4.477-10 10-10s10 4.477 10 10-4.477 10-10 10-10-4.477-10-10z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');color:#333;margin:0;padding:0;}.main-header{background:var(--dark-green);color:white;padding:10px 20px;text-align:center;border-bottom:5px solid var(--gold-color);}.main-header h1{font-family:'Amiri',serif;font-size:2.2em;color:white;margin:0;line-height:1.2;}.container{width:100%;padding:20px;box-sizing:border-box;}.auth-container{max-width:500px;margin:40px auto;background:white;border-radius:15px;border:1px solid #ddd;box-shadow:0 10px 25px rgba(0,0,0,0.1);padding:30px;text-align:center;}#register-container{display:none;}.auth-container h2{font-size:2em;color:var(--dark-green);}.auth-container p{font-size:1.1em;}.auth-container input{padding:12px;border-radius:8px;border:1px solid #ccc;width:90%;text-align:right;font-size:1.1em;font-family:'Noto Nastaliq Urdu',sans-serif;margin-top:10px;}.auth-toggle-link{color:var(--medium-green);text-decoration:underline;cursor:pointer;display:block;margin-top:15px;}.tracker-container{display:none;}.btn{padding:12px 30px;border:none;background-color:var(--medium-green);color:white;border-radius:8px;cursor:pointer;font-size:18px;margin-top:15px;transition:background-color 0.3s;}.btn:hover{background-color:var(--dark-green);}.header-controls{display:flex;justify-content:space-between;align-items:center;padding:10px;margin-bottom:15px;background:#fff;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,0.05);}.logout-btn{background-color:#c62828;}.logout-btn:hover{background-color:#b71c1c;}#welcome-message{font-size:1.4em;font-weight:bold;color:var(--dark-green);}#manual-save-btn{background-color:var(--gold-color);color:var(--dark-green);font-weight:bold;}#manual-save-btn:hover{background-color:#b38e27;}.daily-gem-box{background:linear-gradient(135deg, var(--dark-green), var(--medium-green));color:white;border-radius:12px;padding:20px;margin:20px 0;text-align:center;box-shadow:0 5px 15px rgba(0,0,0,0.2);border-right:5px solid var(--gold-color);}.daily-gem-box h3{margin-top:0;color:white;font-family:'Amiri',serif;border-bottom:2px solid var(--gold-color);padding-bottom:10px;}.daily-gem-box p{font-size:1.4em;line-height:1.8;margin-bottom:0;}.progress-section{margin:20px 0;}.progress-bar-container{width:100%;height:30px;background-color:#e0e0e0;border-radius:15px;overflow:hidden;border:2px solid var(--light-green);}.progress-bar{width:0%;height:100%;background:linear-gradient(90deg,var(--medium-green),var(--light-green));transition:width 0.5s ease-in-out;text-align:center;line-height:30px;color:white;font-weight:bold;}.progress-label{text-align:center;font-size:1.3em;margin-bottom:10px;color:var(--dark-green);}table{width:100%;border-collapse:collapse;margin-top:20px;font-size:1em;}th,td{border:1px solid #ccc;padding:10px;text-align:center;}th{background-color:var(--medium-green);color:white;}.activity-col{text-align:right;font-weight:bold;background-color:#f9f9f9;}input[type="checkbox"]{width:20px;height:20px;cursor:pointer;}.other-activities{margin-top:40px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,0.05);}.other-activities label{display:block;margin:15px 0;font-size:1.1em;cursor:pointer;}.modal-overlay{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,0.6);}.modal-content{background-color:#fefefe;margin:10% auto;padding:25px;border:1px solid #888;width:80%;max-width:700px;border-radius:10px;position:relative;max-height:80vh;overflow-y:auto;}.modal-close-btn{color:#aaa;position:absolute;left:25px;top:10px;font-size:32px;font-weight:bold;}.modal-close-btn:hover,.modal-close-btn:focus{color:black;text-decoration:none;cursor:pointer;}.masail-item{margin-bottom:20px;border-bottom:1px solid #eee;padding-bottom:15px;}.masail-item h4{font-size:1.4em;color:var(--dark-green);}.masail-item p{font-size:1.2em;line-height:1.7;}@media (max-width:768px){.main-header h1{font-size:1.6em;}.auth-container{padding:20px;margin:20px auto;}h2{font-size:1.5em;}th,td{padding:8px;font-size:.9em;}.header-controls{flex-wrap:wrap;justify-content:center;gap:15px;}.logout-btn{order:3}#manual-save-btn{order:2}#welcome-message{order:-1;width:100%;text-align:center;}.container{padding:10px;}.modal-content{width:90%;margin:15% auto;}}@media (max-width:480px){.main-header h1{font-size:1.4em;}.auth-container{width:95%;}.btn{padding:10px 20px;font-size:16px;}th,td{padding:6px;}}
    </style>
</head>
<body>

    <header class="main-header">
        <h1>AH Mobile Ramzan Activity Tracker</h1>
    </header>

    <div class="container">
        <!-- Auth Forms -->
        <div id="login-container" class="auth-container"><h2>لاگ ان</h2><p>براہ کرم اپنا رجسٹرڈ واٹس ایپ نمبر درج کریں۔</p><input type="tel" id="login-number" placeholder="03xxxxxxxxx"><br><button class="btn" onclick="login()">لاگ ان</button><span class="auth-toggle-link" onclick="toggleAuthForms(true)">نیا اکاؤنٹ نہیں ہے؟ یہاں رجسٹر کریں۔</span></div>
        <div id="register-container" class="auth-container"><h2>نئی رجسٹریشن</h2><p>نیا ٹریکر شروع کرنے کے لیے رجسٹر کریں۔</p><input type="text" id="register-name" placeholder="اپنا نام لکھیں"><input type="tel" id="register-number" placeholder="واٹس ایپ نمبر (03xxxxxxxxx)"><input type="text" id="register-city" placeholder="شہر"><input type="number" id="register-age" placeholder="عمر"><br><button class="btn" onclick="register()">رجسٹر کریں</button><span class="auth-toggle-link" onclick="toggleAuthForms(false)">پہلے سے ہی ایک اکاؤنٹ ہے؟ لاگ ان کریں۔</span></div>
        
        <!-- Tracker Screen -->
        <div id="tracker-container" class="tracker-container">
            <div class="header-controls"><button class="btn logout-btn" onclick="logout()">لاگ آؤٹ</button><button class="btn" id="manual-save-btn" onclick="saveData(true)">محفوظ کریں</button><button class="btn" onclick="openMasailModal()">رمضان کے مسائل</button><h2 id="welcome-message"></h2></div>
            <div class="daily-gem-box"><h3 id="daily-gem-title">آج کی اچھی بات</h3><p id="daily-gem-text"></p></div>
            <div class="progress-section"><h3 class="progress-label">آپ کی مجموعی پیشرفت</h3><div class="progress-bar-container"><div class="progress-bar" id="progress-bar">0%</div></div></div>
            <h2>روزمرہ کے معمولات</h2>
            <div style="overflow-x:auto;"><table><thead><tr><th>سرگرمی</th><script>for(let i=1;i<=30;i++)document.write(`<th>${i}</th>`);</script></tr></thead><tbody id="daily-activities"></tbody></table></div>
            <div class="other-activities"><h3>دیگر اہم کام</h3><div id="special-activities"></div></div>
        </div>
    </div>

    <!-- Ramzan ke Masail Modal (EXPANDED CONTENT) -->
    <div id="masail-modal" class="modal-overlay" onclick="closeMasailModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="modal-close-btn" onclick="closeMasailModal()">&times;</span>
            <h2>رمضان کے عام مسائل</h2>

            <div class="masail-item">
                <h4>سوال: کن چیزوں سے روزہ ٹوٹ جاتا ہے؟ (مفسدات روزہ)</h4>
                <p>جواب: جان بوجھ کر کچھ کھانے پینے، سگریٹ نوشی کرنے، اور دوا کھانے یا پینے سے روزہ ٹوٹ جاتا ہے۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: اگر کوئی بھول کر کھا یا پی لے تو کیا حکم ہے؟</h4>
                <p>جواب: اگر کوئی شخص بھول کر کچھ کھا یا پی لے تو اس کا روزہ نہیں ٹوٹتا۔ اسے چاہیے کہ جیسے ہی یاد آئے، کھانا پینا چھوڑ دے اور اپنا روزہ مکمل کرے۔ (صحیح بخاری)</p>
            </div>
            <div class="masail-item">
                <h4>سوال: کیا ٹوتھ پیسٹ یا مسواک استعمال کر سکتے ہیں؟</h4>
                <p>جواب: مسواک کرنا سنت ہے اور روزے میں کسی بھی وقت کی جا سکتی ہے۔ ٹوتھ پیسٹ استعمال کرنا مکروہ ہے، اور اگر اس کا کوئی حصہ حلق سے نیچے اتر گیا تو روزہ ٹوٹ جائے گا۔ احتیاط بہتر ہے۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: کیا انجیکشن یا ڈرپ لگوانے سے روزہ ٹوٹ جاتا ہے؟</h4>
                <p>جواب: ایسا انجیکشن جو طاقت یا غذا کے لیے نہ ہو، بلکہ صرف علاج (جیسے درد کش) کے لیے ہو، اور گوشت یا رگ میں لگے، اس سے روزہ نہیں ٹوٹتا۔ البتہ، گلوکوز یا وٹامنز کی ڈرپ جس کا مقصد جسم کو توانائی دینا ہو، اس سے روزہ ٹوٹ جائے گا۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: کیا آنکھ یا کان میں دوا ڈال سکتے ہیں؟</h4>
                <p>جواب: آنکھ یا کان میں دوا ڈالنے سے روزہ نہیں ٹوٹتا، اگرچہ اس کا ذائقہ حلق میں محسوس ہو۔</p>
            </div>
             <div class="masail-item">
                <h4>سوال: کیا قے (Vomit) آنے سے روزہ ٹوٹ جاتا ہے؟</h4>
                <p>جواب: اگر قے خود بخود آئے، چاہے جتنی بھی ہو، روزہ نہیں ٹوٹتا۔ لیکن اگر جان بوجھ کر قے کی جائے اور وہ منہ بھر کر ہو تو روزہ ٹوٹ جاتا ہے۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: احتلام (Wet Dream) ہونے سے کیا روزہ ٹوٹ جاتا ہے؟</h4>
                <p>جواب: روزے کی حالت میں سونے کے دوران احتلام ہونے سے روزہ نہیں ٹوٹتا۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: کیا خون دینے (Blood Donation/Test) سے روزہ ٹوٹ جاتا ہے؟</h4>
                <p>جواب: ٹیسٹ کے لیے تھوڑی مقدار میں خون نکلوانے سے روزہ نہیں ٹوٹتا۔ البتہ، زیادہ مقدار میں خون عطیہ (donate) کرنے سے جسم میں کمزوری آسکتی ہے، اس لیے بہتر ہے کہ اس سے بچا جائے یا افطار کے بعد کیا جائے۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: جھوٹ، غیبت یا گالی دینے سے کیا روزہ ٹوٹتا ہے؟</h4>
                <p>جواب: ان گناہوں سے روزہ ٹوٹتا تو نہیں، لیکن روزے کا مقصد اور روح ختم ہو جاتی ہے اور ثواب میں شدید کمی آجاتی ہے۔ حدیث میں آتا ہے کہ جو شخص جھوٹ اور برے کام نہ چھوڑے، اللہ کو اس کے بھوکا پیاسا رہنے کی کوئی حاجت نہیں۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: تراویح کی کیا اہمیت ہے؟</h4>
                <p>جواب: رمضان کی راتوں میں تراویح پڑھنا سنت مؤکدہ ہے اور اس کا بے حد ثواب ہے۔ نبی کریم (ﷺ) نے فرمایا: "جس نے رمضان میں ایمان اور ثواب کی نیت سے قیام کیا (تراویح پڑھی)، اس کے گزشتہ گناہ بخش دیے گئے"۔ (صحیح بخاری)</p>
            </div>
             <div class="masail-item">
                <h4>سوال: اعتکاف کیا ہے؟</h4>
                <p>جواب: رمضان کے آخری عشرے میں اللہ کی عبادت کی نیت سے مسجد میں ٹھہرنے کو اعتکاف کہتے ہیں۔ یہ ایک عظیم سنت ہے اور اس کا مقصد دنیا سے کٹ کر اللہ کی رضا حاصل کرنا اور شب قدر کو تلاش کرنا ہے۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: صدقہ فطر (فطرانہ) کیا ہے؟</h4>
                <p>جواب: صدقہ فطر ہر صاحب نصاب مسلمان پر واجب ہے جو وہ اپنی اور اپنے زیر کفالت افراد کی طرف سے عید کی نماز سے پہلے ادا کرتا ہے۔ یہ روزے کی حالت میں ہونے والی کوتاہیوں کا کفارہ اور غریبوں کے لیے عید کی خوشیوں میں شرکت کا ذریعہ ہے۔</p>
            </div>

        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

<script>
    // JavaScript code (bilkul pehle jaisa hai)
    const firebaseConfig = { apiKey: "AIzaSyAQJkMcnT4v7xMpz21hTu-Qf2-LuIVsJLU", authDomain: "ah-ramzan-tracker.firebaseapp.com", projectId: "ah-ramzan-tracker", storageBucket: "ah-ramzan-tracker.appspot.com", messagingSenderId: "887600776644", appId: "1:887600776644:web:3e4d919f6fa3f31651d091", measurementId: "G-27SJHXNWCN" }; firebase.initializeApp(firebaseConfig); const db = firebase.firestore(); const dailyGems = ["نبی کریم (ﷺ) نے فرمایا: اعمال کا دارومدار نیتوں پر ہے۔<br><small>(صحیح بخاری: 1)</small>","اور روزہ دار مرد اور روزہ دار عورتیں، اللہ نے ان سب کے لیے مغفرت اور بڑا اجر تیار کر رکھا ہے۔<br><small>(سورۃ الاحزاب: 35)</small>","افطار کے وقت روزہ دار کی دعا رد نہیں کی جاتی۔<br><small>(سنن ابن ماجہ: 1753)</small>","جس نے رمضان کے روزے ایمان اور احتساب (اجر کی نیت) کے ساتھ رکھے، اس کے پچھلے گناہ معاف کر دیے جاتے ہیں۔<br><small>(صحیح بخاری: 38)</small>","شب قدر ہزار مہینوں سے بہتر ہے۔<br><small>(سورۃ القدر: 3)</small>","اللہ کے نزدیک سب سے پسندیدہ عمل وہ ہے جو ہمیشہ کیا جائے، خواہ وہ تھوڑا ہی کیوں نہ ہو۔<br><small>(صحیح مسلم: 783)</small>","روزہ (گناہوں سے بچنے کے لیے) ڈھال ہے۔<br><small>(صحیح بخاری: 1904)</small>","اپنے والدین کے ساتھ احسان کرو۔<br><small>(سورۃ الاسراء: 23)</small>","جو شخص اللہ اور آخرت کے دن پر ایمان رکھتا ہے، اسے چاہیے کہ اچھی بات کہے یا خاموش رہے۔<br><small>(صحیح بخاری: 6018)</small>","بے شک اللہ صبر کرنے والوں کے ساتھ ہے۔<br><small>(سورۃ البقرۃ: 153)</small>","رمضان وہ مہینہ ہے جس میں قرآن نازل کیا گیا۔<br><small>(سورۃ البقرۃ: 185)</small>","جس نے کسی روزہ دار کو افطار کرایا، اسے بھی اتنا ہی ثواب ملے گا جتنا روزہ دار کو۔<br><small>(جامع ترمذی: 807)</small>","اور اپنے رب کی نعمتوں کا خوب چرچا کرو۔<br><small>(سورۃ الضحیٰ: 11)</small>","صدقہ گناہوں کو ایسے بجھا دیتا ہے جیسے پانی آگ کو بجھا دیتا ہے۔<br><small>(جامع ترمذی: 2616)</small>","اور تم مایوس نہ ہو اللہ کی رحمت سے۔<br><small>(سورۃ یوسف: 87)</small>","جس نے رمضان میں قیام کیا (تراویح پڑھی) ایمان اور ثواب کی نیت سے، اس کے گزشتہ گناہ بخش دیے گئے۔<br><small>(صحیح بخاری: 37)</small>","سب سے افضل ذکر 'لَا إِلَٰهَ إِلَّا اللّٰهُ' ہے۔<br><small>(جامع ترمذی: 3383)</small>","اور اگر تم شکر ادا کرو گے تو میں تم کو اور زیادہ دوں گا۔<br><small>(سورۃ ابراہیم: 7)</small>","مسلمان وہ ہے جس کی زبان اور ہاتھ سے دوسرے مسلمان محفوظ رہیں۔<br><small>(صحیح بخاری: 10)</small>","اللہ تعالیٰ فرماتا ہے: روزہ میرے لیے ہے اور میں ہی اس کا اجر دوں گا۔<br><small>(صحیح بخاری: 1904)</small>","شعبان میرا مہینہ ہے اور رمضان اللہ کا مہینہ ہے۔<br><small>(مشکوٰۃ المصابیح)</small>","روزہ دار کے منہ کی بو اللہ کے نزدیک مشک کی خوشبو سے بھی بہتر ہے۔<br><small>(صحیح بخاری: 1894)</small>","اور اللہ سے مغفرت طلب کرو، بے شک اللہ بخشنے والا مہربان ہے۔<br><small>(سورۃ المزمل: 20)</small>","سحری کھایا کرو کیونکہ سحری کھانے میں برکت ہے۔<br><small>(صحیح بخاری: 1923)</small>","شب قدر کو رمضان کے آخری عشرے کی طاق راتوں میں تلاش کرو۔<br><small>(صحیح بخاری: 2017)</small>","جو شخص جھوٹ بولنا اور اس پر عمل کرنا نہیں چھوڑتا، تو اللہ کو اس کے بھوکا پیاسا رہنے کی کوئی حاجت نہیں۔<br><small>(صحیح بخاری: 1903)</small>","اور ایک دوسرے کی غیبت نہ کرو۔<br><small>(سورۃ الحجرات: 12)</small>","دعا عبادت کا مغز ہے۔<br><small>(جامع ترمذی: 3371)</small>","اور جو اللہ پر بھروسہ کرتا ہے تو وہ اس کے لیے کافی ہے۔<br><small>(سورۃ الطلاق: 3)</small>","عید کے دن اللہ تعالیٰ فرشتوں سے فرماتا ہے: جس مزدور نے اپنا کام پورا کر لیا، اس کا بدلہ کیا ہے؟ فرشتے عرض کرتے ہیں: اس کا بدلہ پورا پورا دیا جائے۔<br><small>(بیہقی)</small>"]; const dailyActivities=["میں نے تہجد کی نماز ادا کی؟","میں نے روزہ رکھا؟","میں نے فجر کی نماز باجماعت ادا کی؟","میں نے فجر کے وقت سورہ یسین کی تلاوت کی؟","میں نے سارا دن لڑائی، جھگڑا اور جھوٹ سے اجتناب کیا؟","میں نے ظہر کی نماز باجماعت ادا کی؟","عصر کے بعد سو مرتبہ درود پاک بھیجا؟","میں نے کم از کم ایک پارے کی تلاوت کی؟","میں نے عصر کی نماز باجماعت ادا کی؟","میں نے دن میں سو مرتبہ استغفار کیا؟","میں نے مغرب کی نماز باجماعت ادا کی؟","میں نے عشاء کی نماز باجماعت ادا کی اور تراویح بھی پڑھی؟","والدین کی خدمت کی؟"]; const specialActivities=["کسی مسلمان بھائی کو اپنے ساتھ افطار کرایا؟","میں نے اللہ کے راستے میں صدقہ کیا؟","جمعہ کے دن سورہ کہف کی تلاوت کی؟","میں نے صلوۃ التسبیح ادا کی۔","ایصال ثواب کیا اور اپنی موت کو یاد کیا؟","میں نے مکمل رمضان تراویح پڑھی؟","میں نے مکمل رمضان روزے رکھے؟","میں نے رمضان میں ایک مرتبہ قرآن پاک مکمل کیا؟","میں نے مسائل (غسل، وضو، نماز) سیکھے؟","میں نے آخری عشرہ کی طاق راتوں میں عبادت کی؟"]; let totalCheckboxes=0; const masailModal=document.getElementById('masail-modal'); function openMasailModal(){masailModal.style.display='block'} function closeMasailModal(){masailModal.style.display='none'} function validatePhoneNumber(number){const regex=/^(03|\+923|923)\d{9}$/;return regex.test(number)} function toggleAuthForms(showRegister){document.getElementById('login-container').style.display=showRegister?'none':'block';document.getElementById('register-container').style.display=showRegister?'block':'none'} async function register(){const name=document.getElementById('register-name').value.trim();const number=document.getElementById('register-number').value.trim();const city=document.getElementById('register-city').value.trim();const age=document.getElementById('register-age').value.trim();if(!name||!number||!city||!age){alert("براہ کرم تمام خانے پُر کریں۔");return} if(!validatePhoneNumber(number)){alert("براہ کرم درست پاکستانی واٹس ایپ نمبر درج کریں۔ (مثال: 03123456789)۔");return} const userRef=db.collection('users').doc(number);const doc=await userRef.get();if(doc.exists){alert("یہ نمبر پہلے ہی رجسٹرڈ ہے۔ براہ کرم لاگ ان کریں۔");}else{await userRef.set({name:name,phoneNumber:number,city:city,age:age,createdAt:new Date(),activityData:{}});localStorage.setItem('loggedInUser',number);showTracker(name)}} async function login(){const number=document.getElementById('login-number').value.trim();if(!number){alert("براہ کرم اپنا واٹس ایپ نمبر درج کریں۔");return} if(!validatePhoneNumber(number)){alert("براہ کرم درست پاکستانی واٹس ایپ نمبر درج کریں۔");return} const userRef=db.collection('users').doc(number);const doc=await userRef.get();if(doc.exists){localStorage.setItem('loggedInUser',number);showTracker(doc.data().name);}else{alert("کوئی صارف اس نمبر کے ساتھ رجسٹرڈ نہیں ہے۔ براہ کرم پہلے رجسٹر ہوں۔");}} function logout(){if(confirm("کیا آپ واقعی لاگ آؤٹ کرنا چاہتے ہیں؟")){localStorage.removeItem('loggedInUser');location.reload()}} function showTracker(userName){document.getElementById('welcome-message').innerText=`خوش آمدید, ${userName}`;document.getElementById('login-container').style.display='none';document.getElementById('register-container').style.display='none';document.getElementById('tracker-container').style.display='block';displayDailyGem();loadData()} function displayDailyGem(){const today=new Date();const dayOfMonth=today.getDate();const gemIndex=(dayOfMonth-1)%30;document.getElementById('daily-gem-text').innerHTML=dailyGems[gemIndex]} async function saveData(isManualSave=!1){const userNumber=localStorage.getItem('loggedInUser');if(!userNumber)return;const data={};document.querySelectorAll('#tracker-container input[type="checkbox"]').forEach(checkbox=>{data[checkbox.id]=checkbox.checked});await db.collection('users').doc(userNumber).update({activityData:data});updateProgressBar();if(isManualSave){alert("آپ کا ڈیٹا کامیابی سے آن لائن محفوظ ہو گیا ہے!")}} async function loadData(){const userNumber=localStorage.getItem('loggedInUser');const doc=await db.collection('users').doc(userNumber).get();const data=doc.exists?doc.data().activityData:null;if(!data){updateProgressBar();return} for(const id in data){const element=document.getElementById(id);if(element){element.checked=data[id]}} updateProgressBar()} function updateProgressBar(){const checkboxes=document.querySelectorAll('#tracker-container input[type="checkbox"]');const checkedCount=Array.from(checkboxes).filter(cb=>cb.checked).length;const percentage=totalCheckboxes>0?Math.round((checkedCount/totalCheckboxes)*100):0;const progressBar=document.getElementById('progress-bar');progressBar.style.width=`${percentage}%`;progressBar.textContent=`${percentage}%`} function generateTables(){const dailyTbody=document.getElementById('daily-activities');dailyActivities.forEach((activity,actIndex)=>{let row=`<tr><td class="activity-col">${activity}</td>`;for(let day=1;day<=30;day++){row+=`<td><input type="checkbox" id="act${actIndex}-day${day}" onchange="saveData()"></td>`} row+=`</tr>`;dailyTbody.innerHTML+=row});const specialDiv=document.getElementById('special-activities');specialActivities.forEach((activity,actIndex)=>{let checkbox=`<label><input type="checkbox" id="sp${actIndex}" onchange="saveData()"> ${activity}</label>`;specialDiv.innerHTML+=checkbox});totalCheckboxes=document.querySelectorAll('#tracker-container input[type="checkbox"]').length} window.onload=function(){generateTables();const loggedInUserNumber=localStorage.getItem('loggedInUser');if(loggedInUserNumber){const userRef=db.collection('users').doc(loggedInUserNumber);userRef.get().then(doc=>{if(doc.exists){showTracker(doc.data().name)}else{localStorage.removeItem('loggedInUser');toggleAuthForms(!1)}})}else{toggleAuthForms(!1)}}
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AH Mobile Ramzan Activity Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* CSS mein koi tabdeeli nahin */
        :root{--dark-green:#0a4f0d;--medium-green:#1b5e20;--light-green:#a5d6a7;--gold-color:#d4af37;--background-cream:#fdfaf5;}body{font-family:'Noto Nastaliq Urdu',sans-serif;background-color:var(--background-cream);background-image:url('data:image/svg+xml,%3Csvg width="80" height="80" viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23d6e8d6" fill-opacity="0.3"%3E%3Cpath d="M50 50c0-5.523 4.477-10 10-10s10 4.477 10 10-4.477 10-10 10-10-4.477-10-10zM10 10c0-5.523 4.477-10 10-10s10 4.477 10 10-4.477 10-10 10-10-4.477-10-10z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');color:#333;margin:0;padding:0;}.main-header{background:var(--dark-green);color:white;padding:10px 20px;text-align:center;border-bottom:5px solid var(--gold-color);}.main-header h1{font-family:'Amiri',serif;font-size:2.2em;color:white;margin:0;line-height:1.2;}.container{width:100%;padding:20px;box-sizing:border-box;}.auth-container{max-width:500px;margin:40px auto;background:white;border-radius:15px;border:1px solid #ddd;box-shadow:0 10px 25px rgba(0,0,0,0.1);padding:30px;text-align:center;}#register-container{display:none;}.auth-container h2{font-size:2em;color:var(--dark-green);}.auth-container p{font-size:1.1em;}.auth-container input{padding:12px;border-radius:8px;border:1px solid #ccc;width:90%;text-align:right;font-size:1.1em;font-family:'Noto Nastaliq Urdu',sans-serif;margin-top:10px;}.auth-toggle-link{color:var(--medium-green);text-decoration:underline;cursor:pointer;display:block;margin-top:15px;}.tracker-container{display:none;}.btn{padding:12px 30px;border:none;background-color:var(--medium-green);color:white;border-radius:8px;cursor:pointer;font-size:18px;margin-top:15px;transition:background-color 0.3s;}.btn:hover{background-color:var(--dark-green);}.header-controls{display:flex;justify-content:space-between;align-items:center;padding:10px;margin-bottom:15px;background:#fff;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,0.05);}.logout-btn{background-color:#c62828;}.logout-btn:hover{background-color:#b71c1c;}#welcome-message{font-size:1.4em;font-weight:bold;color:var(--dark-green);}#manual-save-btn{background-color:var(--gold-color);color:var(--dark-green);font-weight:bold;}#manual-save-btn:hover{background-color:#b38e27;}.daily-gem-box{background:linear-gradient(135deg, var(--dark-green), var(--medium-green));color:white;border-radius:12px;padding:20px;margin:20px 0;text-align:center;box-shadow:0 5px 15px rgba(0,0,0,0.2);border-right:5px solid var(--gold-color);}.daily-gem-box h3{margin-top:0;color:white;font-family:'Amiri',serif;border-bottom:2px solid var(--gold-color);padding-bottom:10px;}.daily-gem-box p{font-size:1.4em;line-height:1.8;margin-bottom:0;}.progress-section{margin:20px 0;}.progress-bar-container{width:100%;height:30px;background-color:#e0e0e0;border-radius:15px;overflow:hidden;border:2px solid var(--light-green);}.progress-bar{width:0%;height:100%;background:linear-gradient(90deg,var(--medium-green),var(--light-green));transition:width 0.5s ease-in-out;text-align:center;line-height:30px;color:white;font-weight:bold;}.progress-label{text-align:center;font-size:1.3em;margin-bottom:10px;color:var(--dark-green);}table{width:100%;border-collapse:collapse;margin-top:20px;font-size:1em;}th,td{border:1px solid #ccc;padding:10px;text-align:center;}th{background-color:var(--medium-green);color:white;}.activity-col{text-align:right;font-weight:bold;background-color:#f9f9f9;}input[type="checkbox"]{width:20px;height:20px;cursor:pointer;}.other-activities{margin-top:40px;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,0.05);}.other-activities label{display:block;margin:15px 0;font-size:1.1em;cursor:pointer;}.modal-overlay{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,0.6);}.modal-content{background-color:#fefefe;margin:10% auto;padding:25px;border:1px solid #888;width:80%;max-width:700px;border-radius:10px;position:relative;max-height:80vh;overflow-y:auto;}.modal-close-btn{color:#aaa;position:absolute;left:25px;top:10px;font-size:32px;font-weight:bold;}.modal-close-btn:hover,.modal-close-btn:focus{color:black;text-decoration:none;cursor:pointer;}.masail-item{margin-bottom:20px;border-bottom:1px solid #eee;padding-bottom:15px;}.masail-item h4{font-size:1.4em;color:var(--dark-green);}.masail-item p{font-size:1.2em;line-height:1.7;}@media (max-width:768px){.main-header h1{font-size:1.6em;}.auth-container{padding:20px;margin:20px auto;}h2{font-size:1.5em;}th,td{padding:8px;font-size:.9em;}.header-controls{flex-wrap:wrap;justify-content:center;gap:15px;}.logout-btn{order:3}#manual-save-btn{order:2}#welcome-message{order:-1;width:100%;text-align:center;}.container{padding:10px;}.modal-content{width:90%;margin:15% auto;}}@media (max-width:480px){.main-header h1{font-size:1.4em;}.auth-container{width:95%;}.btn{padding:10px 20px;font-size:16px;}th,td{padding:6px;}}
    </style>
</head>
<body>

    <header class="main-header">
        <h1>AH Mobile Ramzan Companion</h1>
    </header>

    <div class="container">
        <!-- Auth Forms -->
        <div id="login-container" class="auth-container"><h2>لاگ ان</h2><p>براہ کرم اپنا رجسٹرڈ واٹس ایپ نمبر درج کریں۔</p><input type="tel" id="login-number" placeholder="03xxxxxxxxx"><br><button class="btn" onclick="login()">لاگ ان</button><span class="auth-toggle-link" onclick="toggleAuthForms(true)">نیا اکاؤنٹ نہیں ہے؟ یہاں رجسٹر کریں۔</span></div>
        <div id="register-container" class="auth-container"><h2>نئی رجسٹریشن</h2><p>نیا ٹریکر شروع کرنے کے لیے رجسٹر کریں۔</p><input type="text" id="register-name" placeholder="اپنا نام لکھیں"><input type="tel" id="register-number" placeholder="واٹس ایپ نمبر (03xxxxxxxxx)"><input type="text" id="register-city" placeholder="شہر"><input type="number" id="register-age" placeholder="عمر"><br><button class="btn" onclick="register()">رجسٹر کریں</button><span class="auth-toggle-link" onclick="toggleAuthForms(false)">پہلے سے ہی ایک اکاؤنٹ ہے؟ لاگ ان کریں۔</span></div>
        
        <!-- Tracker Screen -->
        <div id="tracker-container" class="tracker-container">
            <div class="header-controls"><button class="btn logout-btn" onclick="logout()">لاگ آؤٹ</button><button class="btn" id="manual-save-btn" onclick="saveData(true)">محفوظ کریں</button><button class="btn" onclick="openMasailModal()">رمضان کے مسائل</button><h2 id="welcome-message"></h2></div>
            <div class="daily-gem-box"><h3 id="daily-gem-title">آج کی اچھی بات</h3><p id="daily-gem-text"></p></div>
            <div class="progress-section"><h3 class="progress-label">آپ کی مجموعی پیشرفت</h3><div class="progress-bar-container"><div class="progress-bar" id="progress-bar">0%</div></div></div>
            <h2>روزمرہ کے معمولات</h2>
            <div style="overflow-x:auto;"><table><thead><tr><th>سرگرمی</th><script>for(let i=1;i<=30;i++)document.write(`<th>${i}</th>`);</script></tr></thead><tbody id="daily-activities"></tbody></table></div>
            <div class="other-activities"><h3>دیگر اہم کام</h3><div id="special-activities"></div></div>
        </div>
    </div>

    <!-- Ramzan ke Masail Modal (EXPANDED CONTENT) -->
    <div id="masail-modal" class="modal-overlay" onclick="closeMasailModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="modal-close-btn" onclick="closeMasailModal()">&times;</span>
            <h2>رمضان کے عام مسائل</h2>

            <div class="masail-item">
                <h4>سوال: کن چیزوں سے روزہ ٹوٹ جاتا ہے؟ (مفسدات روزہ)</h4>
                <p>جواب: جان بوجھ کر کچھ کھانے پینے، سگریٹ نوشی کرنے، اور دوا کھانے یا پینے سے روزہ ٹوٹ جاتا ہے۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: اگر کوئی بھول کر کھا یا پی لے تو کیا حکم ہے؟</h4>
                <p>جواب: اگر کوئی شخص بھول کر کچھ کھا یا پی لے تو اس کا روزہ نہیں ٹوٹتا۔ اسے چاہیے کہ جیسے ہی یاد آئے، کھانا پینا چھوڑ دے اور اپنا روزہ مکمل کرے۔ (صحیح بخاری)</p>
            </div>
            <div class="masail-item">
                <h4>سوال: کیا ٹوتھ پیسٹ یا مسواک استعمال کر سکتے ہیں؟</h4>
                <p>جواب: مسواک کرنا سنت ہے اور روزے میں کسی بھی وقت کی جا سکتی ہے۔ ٹوتھ پیسٹ استعمال کرنا مکروہ ہے، اور اگر اس کا کوئی حصہ حلق سے نیچے اتر گیا تو روزہ ٹوٹ جائے گا۔ احتیاط بہتر ہے۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: کیا انجیکشن یا ڈرپ لگوانے سے روزہ ٹوٹ جاتا ہے؟</h4>
                <p>جواب: ایسا انجیکشن جو طاقت یا غذا کے لیے نہ ہو، بلکہ صرف علاج (جیسے درد کش) کے لیے ہو، اور گوشت یا رگ میں لگے، اس سے روزہ نہیں ٹوٹتا۔ البتہ، گلوکوز یا وٹامنز کی ڈرپ جس کا مقصد جسم کو توانائی دینا ہو، اس سے روزہ ٹوٹ جائے گا۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: کیا آنکھ یا کان میں دوا ڈال سکتے ہیں؟</h4>
                <p>جواب: آنکھ یا کان میں دوا ڈالنے سے روزہ نہیں ٹوٹتا، اگرچہ اس کا ذائقہ حلق میں محسوس ہو۔</p>
            </div>
             <div class="masail-item">
                <h4>سوال: کیا قے (Vomit) آنے سے روزہ ٹوٹ جاتا ہے؟</h4>
                <p>جواب: اگر قے خود بخود آئے، چاہے جتنی بھی ہو، روزہ نہیں ٹوٹتا۔ لیکن اگر جان بوجھ کر قے کی جائے اور وہ منہ بھر کر ہو تو روزہ ٹوٹ جاتا ہے۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: احتلام (Wet Dream) ہونے سے کیا روزہ ٹوٹ جاتا ہے؟</h4>
                <p>جواب: روزے کی حالت میں سونے کے دوران احتلام ہونے سے روزہ نہیں ٹوٹتا۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: کیا خون دینے (Blood Donation/Test) سے روزہ ٹوٹ جاتا ہے؟</h4>
                <p>جواب: ٹیسٹ کے لیے تھوڑی مقدار میں خون نکلوانے سے روزہ نہیں ٹوٹتا۔ البتہ، زیادہ مقدار میں خون عطیہ (donate) کرنے سے جسم میں کمزوری آسکتی ہے، اس لیے بہتر ہے کہ اس سے بچا جائے یا افطار کے بعد کیا جائے۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: جھوٹ، غیبت یا گالی دینے سے کیا روزہ ٹوٹتا ہے؟</h4>
                <p>جواب: ان گناہوں سے روزہ ٹوٹتا تو نہیں، لیکن روزے کا مقصد اور روح ختم ہو جاتی ہے اور ثواب میں شدید کمی آجاتی ہے۔ حدیث میں آتا ہے کہ جو شخص جھوٹ اور برے کام نہ چھوڑے، اللہ کو اس کے بھوکا پیاسا رہنے کی کوئی حاجت نہیں۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: تراویح کی کیا اہمیت ہے؟</h4>
                <p>جواب: رمضان کی راتوں میں تراویح پڑھنا سنت مؤکدہ ہے اور اس کا بے حد ثواب ہے۔ نبی کریم (ﷺ) نے فرمایا: "جس نے رمضان میں ایمان اور ثواب کی نیت سے قیام کیا (تراویح پڑھی)، اس کے گزشتہ گناہ بخش دیے گئے"۔ (صحیح بخاری)</p>
            </div>
             <div class="masail-item">
                <h4>سوال: اعتکاف کیا ہے؟</h4>
                <p>جواب: رمضان کے آخری عشرے میں اللہ کی عبادت کی نیت سے مسجد میں ٹھہرنے کو اعتکاف کہتے ہیں۔ یہ ایک عظیم سنت ہے اور اس کا مقصد دنیا سے کٹ کر اللہ کی رضا حاصل کرنا اور شب قدر کو تلاش کرنا ہے۔</p>
            </div>
            <div class="masail-item">
                <h4>سوال: صدقہ فطر (فطرانہ) کیا ہے؟</h4>
                <p>جواب: صدقہ فطر ہر صاحب نصاب مسلمان پر واجب ہے جو وہ اپنی اور اپنے زیر کفالت افراد کی طرف سے عید کی نماز سے پہلے ادا کرتا ہے۔ یہ روزے کی حالت میں ہونے والی کوتاہیوں کا کفارہ اور غریبوں کے لیے عید کی خوشیوں میں شرکت کا ذریعہ ہے۔</p>
            </div>

        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

<script>
    // JavaScript code (bilkul pehle jaisa hai)
    const firebaseConfig = { apiKey: "AIzaSyAQJkMcnT4v7xMpz21hTu-Qf2-LuIVsJLU", authDomain: "ah-ramzan-tracker.firebaseapp.com", projectId: "ah-ramzan-tracker", storageBucket: "ah-ramzan-tracker.appspot.com", messagingSenderId: "887600776644", appId: "1:887600776644:web:3e4d919f6fa3f31651d091", measurementId: "G-27SJHXNWCN" }; firebase.initializeApp(firebaseConfig); const db = firebase.firestore(); const dailyGems = ["نبی کریم (ﷺ) نے فرمایا: اعمال کا دارومدار نیتوں پر ہے۔<br><small>(صحیح بخاری: 1)</small>","اور روزہ دار مرد اور روزہ دار عورتیں، اللہ نے ان سب کے لیے مغفرت اور بڑا اجر تیار کر رکھا ہے۔<br><small>(سورۃ الاحزاب: 35)</small>","افطار کے وقت روزہ دار کی دعا رد نہیں کی جاتی۔<br><small>(سنن ابن ماجہ: 1753)</small>","جس نے رمضان کے روزے ایمان اور احتساب (اجر کی نیت) کے ساتھ رکھے، اس کے پچھلے گناہ معاف کر دیے جاتے ہیں۔<br><small>(صحیح بخاری: 38)</small>","شب قدر ہزار مہینوں سے بہتر ہے۔<br><small>(سورۃ القدر: 3)</small>","اللہ کے نزدیک سب سے پسندیدہ عمل وہ ہے جو ہمیشہ کیا جائے، خواہ وہ تھوڑا ہی کیوں نہ ہو۔<br><small>(صحیح مسلم: 783)</small>","روزہ (گناہوں سے بچنے کے لیے) ڈھال ہے۔<br><small>(صحیح بخاری: 1904)</small>","اپنے والدین کے ساتھ احسان کرو۔<br><small>(سورۃ الاسراء: 23)</small>","جو شخص اللہ اور آخرت کے دن پر ایمان رکھتا ہے، اسے چاہیے کہ اچھی بات کہے یا خاموش رہے۔<br><small>(صحیح بخاری: 6018)</small>","بے شک اللہ صبر کرنے والوں کے ساتھ ہے۔<br><small>(سورۃ البقرۃ: 153)</small>","رمضان وہ مہینہ ہے جس میں قرآن نازل کیا گیا۔<br><small>(سورۃ البقرۃ: 185)</small>","جس نے کسی روزہ دار کو افطار کرایا، اسے بھی اتنا ہی ثواب ملے گا جتنا روزہ دار کو۔<br><small>(جامع ترمذی: 807)</small>","اور اپنے رب کی نعمتوں کا خوب چرچا کرو۔<br><small>(سورۃ الضحیٰ: 11)</small>","صدقہ گناہوں کو ایسے بجھا دیتا ہے جیسے پانی آگ کو بجھا دیتا ہے۔<br><small>(جامع ترمذی: 2616)</small>","اور تم مایوس نہ ہو اللہ کی رحمت سے۔<br><small>(سورۃ یوسف: 87)</small>","جس نے رمضان میں قیام کیا (تراویح پڑھی) ایمان اور ثواب کی نیت سے، اس کے گزشتہ گناہ بخش دیے گئے۔<br><small>(صحیح بخاری: 37)</small>","سب سے افضل ذکر 'لَا إِلَٰهَ إِلَّا اللّٰهُ' ہے۔<br><small>(جامع ترمذی: 3383)</small>","اور اگر تم شکر ادا کرو گے تو میں تم کو اور زیادہ دوں گا۔<br><small>(سورۃ ابراہیم: 7)</small>","مسلمان وہ ہے جس کی زبان اور ہاتھ سے دوسرے مسلمان محفوظ رہیں۔<br><small>(صحیح بخاری: 10)</small>","اللہ تعالیٰ فرماتا ہے: روزہ میرے لیے ہے اور میں ہی اس کا اجر دوں گا۔<br><small>(صحیح بخاری: 1904)</small>","شعبان میرا مہینہ ہے اور رمضان اللہ کا مہینہ ہے۔<br><small>(مشکوٰۃ المصابیح)</small>","روزہ دار کے منہ کی بو اللہ کے نزدیک مشک کی خوشبو سے بھی بہتر ہے۔<br><small>(صحیح بخاری: 1894)</small>","اور اللہ سے مغفرت طلب کرو، بے شک اللہ بخشنے والا مہربان ہے۔<br><small>(سورۃ المزمل: 20)</small>","سحری کھایا کرو کیونکہ سحری کھانے میں برکت ہے۔<br><small>(صحیح بخاری: 1923)</small>","شب قدر کو رمضان کے آخری عشرے کی طاق راتوں میں تلاش کرو۔<br><small>(صحیح بخاری: 2017)</small>","جو شخص جھوٹ بولنا اور اس پر عمل کرنا نہیں چھوڑتا، تو اللہ کو اس کے بھوکا پیاسا رہنے کی کوئی حاجت نہیں۔<br><small>(صحیح بخاری: 1903)</small>","اور ایک دوسرے کی غیبت نہ کرو۔<br><small>(سورۃ الحجرات: 12)</small>","دعا عبادت کا مغز ہے۔<br><small>(جامع ترمذی: 3371)</small>","اور جو اللہ پر بھروسہ کرتا ہے تو وہ اس کے لیے کافی ہے۔<br><small>(سورۃ الطلاق: 3)</small>","عید کے دن اللہ تعالیٰ فرشتوں سے فرماتا ہے: جس مزدور نے اپنا کام پورا کر لیا، اس کا بدلہ کیا ہے؟ فرشتے عرض کرتے ہیں: اس کا بدلہ پورا پورا دیا جائے۔<br><small>(بیہقی)</small>"]; const dailyActivities=["میں نے تہجد کی نماز ادا کی؟","میں نے روزہ رکھا؟","میں نے فجر کی نماز باجماعت ادا کی؟","میں نے فجر کے وقت سورہ یسین کی تلاوت کی؟","میں نے سارا دن لڑائی، جھگڑا اور جھوٹ سے اجتناب کیا؟","میں نے ظہر کی نماز باجماعت ادا کی؟","عصر کے بعد سو مرتبہ درود پاک بھیجا؟","میں نے کم از کم ایک پارے کی تلاوت کی؟","میں نے عصر کی نماز باجماعت ادا کی؟","میں نے دن میں سو مرتبہ استغفار کیا؟","میں نے مغرب کی نماز باجماعت ادا کی؟","میں نے عشاء کی نماز باجماعت ادا کی اور تراویح بھی پڑھی؟","والدین کی خدمت کی؟"]; const specialActivities=["کسی مسلمان بھائی کو اپنے ساتھ افطار کرایا؟","میں نے اللہ کے راستے میں صدقہ کیا؟","جمعہ کے دن سورہ کہف کی تلاوت کی؟","میں نے صلوۃ التسبیح ادا کی۔","ایصال ثواب کیا اور اپنی موت کو یاد کیا؟","میں نے مکمل رمضان تراویح پڑھی؟","میں نے مکمل رمضان روزے رکھے؟","میں نے رمضان میں ایک مرتبہ قرآن پاک مکمل کیا؟","میں نے مسائل (غسل، وضو، نماز) سیکھے؟","میں نے آخری عشرہ کی طاق راتوں میں عبادت کی؟"]; let totalCheckboxes=0; const masailModal=document.getElementById('masail-modal'); function openMasailModal(){masailModal.style.display='block'} function closeMasailModal(){masailModal.style.display='none'} function validatePhoneNumber(number){const regex=/^(03|\+923|923)\d{9}$/;return regex.test(number)} function toggleAuthForms(showRegister){document.getElementById('login-container').style.display=showRegister?'none':'block';document.getElementById('register-container').style.display=showRegister?'block':'none'} async function register(){const name=document.getElementById('register-name').value.trim();const number=document.getElementById('register-number').value.trim();const city=document.getElementById('register-city').value.trim();const age=document.getElementById('register-age').value.trim();if(!name||!number||!city||!age){alert("براہ کرم تمام خانے پُر کریں۔");return} if(!validatePhoneNumber(number)){alert("براہ کرم درست پاکستانی واٹس ایپ نمبر درج کریں۔ (مثال: 03123456789)۔");return} const userRef=db.collection('users').doc(number);const doc=await userRef.get();if(doc.exists){alert("یہ نمبر پہلے ہی رجسٹرڈ ہے۔ براہ کرم لاگ ان کریں۔");}else{await userRef.set({name:name,phoneNumber:number,city:city,age:age,createdAt:new Date(),activityData:{}});localStorage.setItem('loggedInUser',number);showTracker(name)}} async function login(){const number=document.getElementById('login-number').value.trim();if(!number){alert("براہ کرم اپنا واٹس ایپ نمبر درج کریں۔");return} if(!validatePhoneNumber(number)){alert("براہ کرم درست پاکستانی واٹس ایپ نمبر درج کریں۔");return} const userRef=db.collection('users').doc(number);const doc=await userRef.get();if(doc.exists){localStorage.setItem('loggedInUser',number);showTracker(doc.data().name);}else{alert("کوئی صارف اس نمبر کے ساتھ رجسٹرڈ نہیں ہے۔ براہ کرم پہلے رجسٹر ہوں۔");}} function logout(){if(confirm("کیا آپ واقعی لاگ آؤٹ کرنا چاہتے ہیں؟")){localStorage.removeItem('loggedInUser');location.reload()}} function showTracker(userName){document.getElementById('welcome-message').innerText=`خوش آمدید, ${userName}`;document.getElementById('login-container').style.display='none';document.getElementById('register-container').style.display='none';document.getElementById('tracker-container').style.display='block';displayDailyGem();loadData()} function displayDailyGem(){const today=new Date();const dayOfMonth=today.getDate();const gemIndex=(dayOfMonth-1)%30;document.getElementById('daily-gem-text').innerHTML=dailyGems[gemIndex]} async function saveData(isManualSave=!1){const userNumber=localStorage.getItem('loggedInUser');if(!userNumber)return;const data={};document.querySelectorAll('#tracker-container input[type="checkbox"]').forEach(checkbox=>{data[checkbox.id]=checkbox.checked});await db.collection('users').doc(userNumber).update({activityData:data});updateProgressBar();if(isManualSave){alert("آپ کا ڈیٹا کامیابی سے آن لائن محفوظ ہو گیا ہے!")}} async function loadData(){const userNumber=localStorage.getItem('loggedInUser');const doc=await db.collection('users').doc(userNumber).get();const data=doc.exists?doc.data().activityData:null;if(!data){updateProgressBar();return} for(const id in data){const element=document.getElementById(id);if(element){element.checked=data[id]}} updateProgressBar()} function updateProgressBar(){const checkboxes=document.querySelectorAll('#tracker-container input[type="checkbox"]');const checkedCount=Array.from(checkboxes).filter(cb=>cb.checked).length;const percentage=totalCheckboxes>0?Math.round((checkedCount/totalCheckboxes)*100):0;const progressBar=document.getElementById('progress-bar');progressBar.style.width=`${percentage}%`;progressBar.textContent=`${percentage}%`} function generateTables(){const dailyTbody=document.getElementById('daily-activities');dailyActivities.forEach((activity,actIndex)=>{let row=`<tr><td class="activity-col">${activity}</td>`;for(let day=1;day<=30;day++){row+=`<td><input type="checkbox" id="act${actIndex}-day${day}" onchange="saveData()"></td>`} row+=`</tr>`;dailyTbody.innerHTML+=row});const specialDiv=document.getElementById('special-activities');specialActivities.forEach((activity,actIndex)=>{let checkbox=`<label><input type="checkbox" id="sp${actIndex}" onchange="saveData()"> ${activity}</label>`;specialDiv.innerHTML+=checkbox});totalCheckboxes=document.querySelectorAll('#tracker-container input[type="checkbox"]').length} window.onload=function(){generateTables();const loggedInUserNumber=localStorage.getItem('loggedInUser');if(loggedInUserNumber){const userRef=db.collection('users').doc(loggedInUserNumber);userRef.get().then(doc=>{if(doc.exists){showTracker(doc.data().name)}else{localStorage.removeItem('loggedInUser');toggleAuthForms(!1)}})}else{toggleAuthForms(!1)}}
</script>

</body>
</html>
